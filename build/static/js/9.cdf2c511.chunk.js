(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[9],{102:function(e,t,a){"use strict";var r=a(46),n=a(47),l=a(48),o=a.n(l),s=a(0),i=a.n(s),c=(a(52),a(1)),u=a.n(c),d=["as","className","type","tooltip"],m={type:u.a.string,tooltip:u.a.bool,as:u.a.elementType},f=i.a.forwardRef((function(e,t){var a=e.as,l=void 0===a?"div":a,s=e.className,c=e.type,u=void 0===c?"valid":c,m=e.tooltip,f=void 0!==m&&m,b=Object(n.a)(e,d);return i.a.createElement(l,Object(r.a)({},b,{ref:t,className:o()(s,u+"-"+(f?"tooltip":"feedback"))}))}));f.displayName="Feedback",f.propTypes=m;var b=f,p=i.a.createContext({controlId:void 0}),v=a(49),h=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],g=i.a.forwardRef((function(e,t){var a=e.id,l=e.bsPrefix,c=e.bsCustomPrefix,u=e.className,d=e.type,m=void 0===d?"checkbox":d,f=e.isValid,b=void 0!==f&&f,g=e.isInvalid,E=void 0!==g&&g,y=e.isStatic,O=e.as,j=void 0===O?"input":O,x=Object(n.a)(e,h),N=Object(s.useContext)(p),k=N.controlId,C=N.custom?[c,"custom-control-input"]:[l,"form-check-input"],I=C[0],P=C[1];return l=Object(v.a)(I,P),i.a.createElement(j,Object(r.a)({},x,{ref:t,type:m,id:a||k,className:o()(u,l,b&&"is-valid",E&&"is-invalid",y&&"position-static")}))}));g.displayName="FormCheckInput";var E=g,y=["bsPrefix","bsCustomPrefix","className","htmlFor"],O=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.bsCustomPrefix,c=e.className,u=e.htmlFor,d=Object(n.a)(e,y),m=Object(s.useContext)(p),f=m.controlId,b=m.custom?[l,"custom-control-label"]:[a,"form-check-label"],h=b[0],g=b[1];return a=Object(v.a)(h,g),i.a.createElement("label",Object(r.a)({},d,{ref:t,htmlFor:u||f,className:o()(c,a)}))}));O.displayName="FormCheckLabel";var j=O,x=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],N=i.a.forwardRef((function(e,t){var a=e.id,l=e.bsPrefix,c=e.bsCustomPrefix,u=e.inline,d=void 0!==u&&u,m=e.disabled,f=void 0!==m&&m,h=e.isValid,g=void 0!==h&&h,y=e.isInvalid,O=void 0!==y&&y,N=e.feedbackTooltip,k=void 0!==N&&N,C=e.feedback,I=e.className,P=e.style,w=e.title,S=void 0===w?"":w,F=e.type,R=void 0===F?"checkbox":F,L=e.label,T=e.children,V=e.custom,A=e.as,_=void 0===A?"input":A,J=Object(n.a)(e,x),q="switch"===R||V,z=q?[c,"custom-control"]:[l,"form-check"],M=z[0],B=z[1];l=Object(v.a)(M,B);var G=Object(s.useContext)(p).controlId,U=Object(s.useMemo)((function(){return{controlId:a||G,custom:q}}),[G,q,a]),D=q||null!=L&&!1!==L&&!T,H=i.a.createElement(E,Object(r.a)({},J,{type:"switch"===R?"checkbox":R,ref:t,isValid:g,isInvalid:O,isStatic:!D,disabled:f,as:_}));return i.a.createElement(p.Provider,{value:U},i.a.createElement("div",{style:P,className:o()(I,l,q&&"custom-"+R,d&&l+"-inline")},T||i.a.createElement(i.a.Fragment,null,H,D&&i.a.createElement(j,{title:S},L),(g||O)&&i.a.createElement(b,{type:g?"valid":"invalid",tooltip:k},C))))}));N.displayName="FormCheck",N.Input=E,N.Label=j;var k=N,C=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],I=i.a.forwardRef((function(e,t){var a=e.id,l=e.bsPrefix,c=e.bsCustomPrefix,u=e.className,d=e.isValid,m=e.isInvalid,f=e.lang,b=e.as,h=void 0===b?"input":b,g=Object(n.a)(e,C),E=Object(s.useContext)(p),y=E.controlId,O=E.custom?[c,"custom-file-input"]:[l,"form-control-file"],j=O[0],x=O[1];return l=Object(v.a)(j,x),i.a.createElement(h,Object(r.a)({},g,{ref:t,id:a||y,type:"file",lang:f,className:o()(u,l,d&&"is-valid",m&&"is-invalid")}))}));I.displayName="FormFileInput";var P=I,w=["bsPrefix","bsCustomPrefix","className","htmlFor"],S=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.bsCustomPrefix,c=e.className,u=e.htmlFor,d=Object(n.a)(e,w),m=Object(s.useContext)(p),f=m.controlId,b=m.custom?[l,"custom-file-label"]:[a,"form-file-label"],h=b[0],g=b[1];return a=Object(v.a)(h,g),i.a.createElement("label",Object(r.a)({},d,{ref:t,htmlFor:u||f,className:o()(c,a),"data-browse":d["data-browse"]}))}));S.displayName="FormFileLabel";var F=S,R=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],L=i.a.forwardRef((function(e,t){var a=e.id,l=e.bsPrefix,c=e.bsCustomPrefix,u=e.disabled,d=void 0!==u&&u,m=e.isValid,f=void 0!==m&&m,h=e.isInvalid,g=void 0!==h&&h,E=e.feedbackTooltip,y=void 0!==E&&E,O=e.feedback,j=e.className,x=e.style,N=e.label,k=e.children,C=e.custom,I=e.lang,w=e["data-browse"],S=e.as,L=void 0===S?"div":S,T=e.inputAs,V=void 0===T?"input":T,A=Object(n.a)(e,R),_=C?[c,"custom"]:[l,"form-file"],J=_[0],q=_[1];l=Object(v.a)(J,q);var z=Object(s.useContext)(p).controlId,M=Object(s.useMemo)((function(){return{controlId:a||z,custom:C}}),[z,C,a]),B=null!=N&&!1!==N&&!k,G=i.a.createElement(P,Object(r.a)({},A,{ref:t,isValid:f,isInvalid:g,disabled:d,as:V,lang:I}));return i.a.createElement(p.Provider,{value:M},i.a.createElement(L,{style:x,className:o()(j,l,C&&"custom-file")},k||i.a.createElement(i.a.Fragment,null,C?i.a.createElement(i.a.Fragment,null,G,B&&i.a.createElement(F,{"data-browse":w},N)):i.a.createElement(i.a.Fragment,null,B&&i.a.createElement(F,null,N),G),(f||g)&&i.a.createElement(b,{type:f?"valid":"invalid",tooltip:y},O))))}));L.displayName="FormFile",L.Input=P,L.Label=F;var T=L,V=(a(5),["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"]),A=i.a.forwardRef((function(e,t){var a,l,c=e.bsPrefix,u=e.bsCustomPrefix,d=e.type,m=e.size,f=e.htmlSize,b=e.id,h=e.className,g=e.isValid,E=void 0!==g&&g,y=e.isInvalid,O=void 0!==y&&y,j=e.plaintext,x=e.readOnly,N=e.custom,k=e.as,C=void 0===k?"input":k,I=Object(n.a)(e,V),P=Object(s.useContext)(p).controlId,w=N?[u,"custom"]:[c,"form-control"],S=w[0],F=w[1];if(c=Object(v.a)(S,F),j)(l={})[c+"-plaintext"]=!0,a=l;else if("file"===d){var R;(R={})[c+"-file"]=!0,a=R}else if("range"===d){var L;(L={})[c+"-range"]=!0,a=L}else if("select"===C&&N){var T;(T={})[c+"-select"]=!0,T[c+"-select-"+m]=m,a=T}else{var A;(A={})[c]=!0,A[c+"-"+m]=m,a=A}return i.a.createElement(C,Object(r.a)({},I,{type:d,size:f,ref:t,readOnly:x,id:b||P,className:o()(h,a,E&&"is-valid",O&&"is-invalid")}))}));A.displayName="FormControl";var _=Object.assign(A,{Feedback:b}),J=["bsPrefix","className","children","controlId","as"],q=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.className,c=e.children,u=e.controlId,d=e.as,m=void 0===d?"div":d,f=Object(n.a)(e,J);a=Object(v.a)(a,"form-group");var b=Object(s.useMemo)((function(){return{controlId:u}}),[u]);return i.a.createElement(p.Provider,{value:b},i.a.createElement(m,Object(r.a)({},f,{ref:t,className:o()(l,a)}),c))}));q.displayName="FormGroup";var z=q,M=a(62),B=["as","bsPrefix","column","srOnly","className","htmlFor"],G=i.a.forwardRef((function(e,t){var a=e.as,l=void 0===a?"label":a,c=e.bsPrefix,u=e.column,d=e.srOnly,m=e.className,f=e.htmlFor,b=Object(n.a)(e,B),h=Object(s.useContext)(p).controlId;c=Object(v.a)(c,"form-label");var g="col-form-label";"string"===typeof u&&(g=g+" "+g+"-"+u);var E=o()(m,c,d&&"sr-only",u&&g);return f=f||h,u?i.a.createElement(M.a,Object(r.a)({ref:t,as:"label",className:E,htmlFor:f},b)):i.a.createElement(l,Object(r.a)({ref:t,className:E,htmlFor:f},b))}));G.displayName="FormLabel",G.defaultProps={column:!1,srOnly:!1};var U=G,D=["bsPrefix","className","as","muted"],H=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.className,s=e.as,c=void 0===s?"small":s,u=e.muted,d=Object(n.a)(e,D);return a=Object(v.a)(a,"form-text"),i.a.createElement(c,Object(r.a)({},d,{ref:t,className:o()(l,a,u&&"text-muted")}))}));H.displayName="FormText";var K=H,Q=i.a.forwardRef((function(e,t){return i.a.createElement(k,Object(r.a)({},e,{ref:t,type:"switch"}))}));Q.displayName="Switch",Q.Input=k.Input,Q.Label=k.Label;var W=Q,X=a(58),Y=["bsPrefix","inline","className","validated","as"],Z=Object(X.a)("form-row"),$=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.inline,s=e.className,c=e.validated,u=e.as,d=void 0===u?"form":u,m=Object(n.a)(e,Y);return a=Object(v.a)(a,"form"),i.a.createElement(d,Object(r.a)({},m,{ref:t,className:o()(s,c&&"was-validated",l&&a+"-inline")}))}));$.displayName="Form",$.defaultProps={inline:!1},$.Row=Z,$.Group=z,$.Control=_,$.Check=k,$.File=T,$.Switch=W,$.Label=U,$.Text=K;t.a=$},149:function(e,t,a){"use strict";a.r(t);var r=a(21),n=a(2),l=a(15),o=a(7),s=a(8),i=a(10),c=a(9),u=a(0),d=a.n(u),m=a(98),f=a(62),b=a(103),p=a(102),v=a(120),h=a(63),g=a(71),E=(a(79),a(80),function(e){var t=e.data,a=e.headers,r=e.handleRemove,n=e.startEditing,l=e.editIdx,o=e.handleChange,s=e.stopEditing;return d.a.createElement("div",null,d.a.createElement("table",{className:"table sizeTable "},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{scope:"col"},"#"),a.map((function(e,t){return d.a.createElement("th",{key:"th-".concat(t),scope:"col"},e.name)})),d.a.createElement("th",{scope:"col"}),d.a.createElement("th",{scope:"col"}))),d.a.createElement("tbody",null,t.map((function(e,t){return function(e,t,a,r,n,l,o,s){var i=l===t;return d.a.createElement("tr",{key:"tr-".concat(t)},d.a.createElement("td",null,t),a.map((function(a,r){return d.a.createElement("td",{key:"td-".concat(r)},i?d.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return o(e,a.prop,t)},name:a.prop,value:e[a.prop]}):e[a.prop])})),i?d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return s(t)}},"check_circle")):d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return n(t)}},"edit")),d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return r(t)}},"delete")))}(e,t,a,r,n,l,o,s)})))))}),y=[{name:"Parada de bus",prop:"name"},{name:"Latitude",prop:"latitude"},{name:"Longitude",prop:"longitude"}],O=a(19),j=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={latitude:"",longitude:"",name:"",errors:""},e.validateFields=function(){var t=!1,a=[];return e.state.latitude||(t=!0,a.push("La latitude es requerida")),e.state.longitude||(t=!0,a.push("La longitude es requerida")),e.state.name||(t=!0,a.push("El nombre es requerido")),t&&e.setState({errors:a}),t},e.handleInputChange=function(t){var a=t.target.name;e.setState(Object(r.a)({},a,t.target.value))},e.createRow=function(t){t.preventDefault();var a=e.state.name,r=e.state;e.validateFields()||(e.props.addRow(r),e.setState({latitude:"",longitude:"",name:a,errors:""}),t.currentTarget.reset())},e.createSchedule=function(t){t.preventDefault();var a=e.state;t.currentTarget.reset(),console.log(a)},e}return Object(s.a)(a,[{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(O.a,null,d.a.createElement(m.a,null,d.a.createElement(f.a,null,this.state.errors&&d.a.createElement("div",{className:"alert alert-warning",role:"alert"},this.state.errors.map((function(e){return d.a.createElement("li",null,e)}))),d.a.createElement("form",{onSubmit:this.createRow,autoComplete:"off"},d.a.createElement(m.a,null,d.a.createElement(f.a,{md:12},d.a.createElement("input",{type:"text",onChange:this.handleInputChange,className:"  form-control mb-2",placeholder:"Nombre parada de bus",name:"name"}))),d.a.createElement(m.a,null,d.a.createElement(f.a,{md:4},d.a.createElement("input",{type:"number",onChange:this.handleInputChange,className:"  form-control",placeholder:"latitude",name:"latitude"})),d.a.createElement(f.a,{md:4},d.a.createElement("input",{type:"number",onChange:this.handleInputChange,className:" form-control",placeholder:"longitude",name:"longitude"})),d.a.createElement(f.a,{md:4},d.a.createElement("button",{type:"submit",className:"btn-block btn  btn-raised btn-primary"},"Agregar"))))))))}}]),a}(d.a.Component),x=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[],headers:y,editIdx:-1,routeList:[]},e.addRow=function(t){var a=e.state.data,r=[].concat(Object(l.a)(a),[t]);e.setState({data:r})},e.handleRemove=function(t){e.setState({data:e.state.data.filter((function(e,a){return a!==t}))})},e.startEditing=function(t){e.setState({editIdx:t})},e.stopEditing=function(t){e.setState({editIdx:-1})},e.handleChange=function(t,a,l){var o=t.target.value;e.setState({data:e.state.data.map((function(e,t){return t===l?Object(n.a)(Object(n.a)({},e),{},Object(r.a)({},a,o)):e}))})},e.setRoute=function(t){var a=t.target.value;e.setState({route:a}),console.log(a)},e.createStopBus=function(){var t=e.state.route;if(console.log(t),e.state.data.length<=0)g.b.error("Ingrese paradas de bus");else{var a=e.state.data.map((function(e){return{latitude:e.latitude,longitude:e.longitude}}));console.log(a),h.a.post("/stopBus",{route:t,detail:a}).then((function(t){e.setState({data:[]}),g.b.success("Paradas de bus creadas correctamente.")})).catch((function(e){g.b.error(JSON.stringify(e.data.errors,null,2))}))}},e.getRoutes(),e}return Object(s.a)(a,[{key:"getRoutes",value:function(){var e=this;h.a.get("/route").then((function(t){e.setState({routeList:t.data.route}),e.setState({route:t.data.route[0]._id})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return d.a.createElement("div",{className:"container"},d.a.createElement(m.a,null,d.a.createElement(f.a,{md:12},d.a.createElement(b.a,null,d.a.createElement(b.a.Body,null,d.a.createElement(m.a,null,d.a.createElement(f.a,{md:6},d.a.createElement(p.a.Group,{as:m.a,controlId:"exampleForm.ControlSelect1"},d.a.createElement(p.a.Label,{column:!0,sm:"2"},"Ruta"),d.a.createElement(f.a,{sm:"10"},d.a.createElement(p.a.Control,{as:"select",name:"route",onChange:this.setRoute},this.state.routeList.map((function(e,t){var a=e._id,r=e.name;return d.a.createElement("option",{value:a,key:t}," ",r," ")})))))),d.a.createElement(f.a,{md:6},d.a.createElement(v.a,{variant:"primary",onClick:this.createStopBus,className:"btn-block"},"Guardar"))),d.a.createElement("div",{className:"clearfix"}),d.a.createElement(m.a,null,d.a.createElement(f.a,{md:6},d.a.createElement(j,{addRow:this.addRow})),d.a.createElement(f.a,{md:6},d.a.createElement(E,{headers:y,data:this.state.data,handleRemove:this.handleRemove,startEditing:this.startEditing,editIdx:this.state.editIdx,handleChange:this.handleChange,stopEditing:this.stopEditing})))))),d.a.createElement(g.a,{closeButton:!1,position:"bottom-right"})))}}]),a}(d.a.Component);t.default=x},52:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];function r(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];var n=null;return t.forEach((function(e){if(null==n){var t=e.apply(void 0,a);null!=t&&(n=t)}})),n}return(0,l.default)(r)};var r,n=a(57),l=(r=n)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t,a){"use strict";var r=a(7),n=a(8),l=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,[{key:"getLocalRefreshToken",value:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken}},{key:"getLocalAccessToken",value:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.token}},{key:"updateLocalAccessToken",value:function(e){var t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))}},{key:"getUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"setUser",value:function(e){console.log(JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))}},{key:"removeUser",value:function(){localStorage.removeItem("user")}}]),e}();t.a=new l},56:function(e,t,a){"use strict";var r=a(68),n=a.n(r),l=a(69),o=a(70),s=a.n(o),i=a(54),c=s.a.create({baseURL:"https://appbus-backend.herokuapp.com/api",headers:{"Content-Type":"application/json"}});c.interceptors.request.use((function(e){var t=i.a.getLocalAccessToken();return t&&(e.headers["x-token"]=t),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/auth/signin"===(a=t.config).url||!t.response){e.next=19;break}if(401!==t.response.status||a._retry){e.next=18;break}return a._retry=!0,e.prev=4,e.next=7,c.post("/auth/refreshtoken",{refreshToken:i.a.getLocalRefreshToken()});case 7:return r=e.sent,l=r.data.accessToken,i.a.updateLocalAccessToken(l),e.abrupt("return",c(a));case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",Promise.reject(t.response));case 19:return e.abrupt("return",Promise.reject(t));case 20:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()),t.a=c},57:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,a,r,n,l,o){var s=n||"<<anonymous>>",i=o||r;if(null==a[r])return t?new Error("Required "+l+" `"+i+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),d=6;d<c;d++)u[d-6]=arguments[d];return e.apply(void 0,[a,r,s,l,i].concat(u))}var a=t.bind(null,!1);return a.isRequired=t.bind(null,!0),a},e.exports=t.default},63:function(e,t,a){"use strict";var r=a(7),n=a(8),l=a(56),o=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,[{key:"get",value:function(e){return l.a.get(e)}},{key:"post",value:function(e,t){return l.a.post(e,t)}}]),e}();t.a=new o},80:function(e,t,a){}}]);
//# sourceMappingURL=9.cdf2c511.chunk.js.map