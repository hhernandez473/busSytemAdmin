(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[10],{156:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(7),s=a(8),o=a(24),c=a(10),u=a(9),i=a(0),l=a.n(i),m=(a(97),a(19)),p=a(64),h=a(70),g=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={isToggleOn:!0},n.handleClick=n.handleClick.bind(Object(o.a)(n)),n.login=n.login.bind(Object(o.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(o.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(o.a)(n)),n.state={username:"",password:""},n}return Object(s.a)(a,[{key:"handleClick",value:function(){this.setState((function(e){return{isToggleOn:!e.isToggleOn}}))}},{key:"login",value:function(){var e=this;h.a.login(this.state.username,this.state.password).then((function(){e.props.history.push("/register/stop-bus"),window.location.reload()}),(function(e){console.log(e)}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e;return l.a.createElement(m.a,null,l.a.createElement(p.a,null),l.a.createElement("div",{className:"auth-wrapper "},l.a.createElement("div",{className:"auth-content"},l.a.createElement("div",{className:"auth-bg"},l.a.createElement("span",{className:"r"}),l.a.createElement("span",{className:"r s"}),l.a.createElement("span",{className:"r s"}),l.a.createElement("span",{className:"r"})),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body text-center"},l.a.createElement("div",{className:"mb-4"},l.a.createElement("i",{className:"feather icon-user-plus auth-icon"})),l.a.createElement("h3",{className:"mb-4"},"Buses Administraci\xf3n"),l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",value:this.state.username,onChange:this.onChangeUsername})),l.a.createElement("div",{className:"input-group mb-4"},l.a.createElement("input",(e={type:"password",className:"form-control",placeholder:"password"},Object(n.a)(e,"type","password"),Object(n.a)(e,"className","form-control"),Object(n.a)(e,"name","password"),Object(n.a)(e,"value",this.state.password),Object(n.a)(e,"onChange",this.onChangePassword),e))),l.a.createElement("button",{className:"btn btn-secondary shadow-2 mb-4",onClick:this.login},"Iniciar Sesi\xf3n"))))))}}]),a}(l.a.Component);t.default=g},55:function(e,t,a){"use strict";var n=a(80),r=a.n(n),s=a(81),o=a(82),c=a.n(o),u=a(58),i=c.a.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});i.interceptors.request.use((function(e){var t=u.a.getLocalAccessToken();return t&&(e.headers["x-token"]=t),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/auth/signin"===(a=t.config).url||!t.response){e.next=19;break}if(401!==t.response.status||a._retry){e.next=18;break}return a._retry=!0,e.prev=4,e.next=7,i.post("/auth",{refreshToken:u.a.getLocalRefreshToken()});case 7:return n=e.sent,s=n.data.accessToken,u.a.updateLocalAccessToken(s),e.abrupt("return",i(a));case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",Promise.reject(t.response));case 19:return e.abrupt("return",Promise.reject(t));case 20:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()),t.a=i},58:function(e,t,a){"use strict";var n=a(7),r=a(8),s=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getLocalRefreshToken",value:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken}},{key:"getLocalAccessToken",value:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.token}},{key:"updateLocalAccessToken",value:function(e){var t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))}},{key:"getUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"setUser",value:function(e){console.log(JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))}},{key:"removeUser",value:function(){localStorage.removeItem("user")}}]),e}();t.a=new s},70:function(e,t,a){"use strict";var n=a(7),r=a(8),s=a(55),o=a(58),c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"login",value:function(e,t){return s.a.post("/auth/login",{email:e,password:t}).then((function(e){return e.data&&o.a.setUser(e.data),e.data}))}},{key:"logout",value:function(){o.a.removeUser()}},{key:"register",value:function(e,t,a){return s.a.post("/auth/signup",{username:e,email:t,password:a})}},{key:"getCurrentUser",value:function(){return o.a.getUser()}}]),e}();t.a=new c}}]);
//# sourceMappingURL=10.7412cba3.chunk.js.map