(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[13],{149:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(2),l=a(15),o=a(7),c=a(8),s=a(10),u=a(9),i=a(0),d=a.n(i),m=a(143),p=a(98),h=a(150),E=a(144),f=a(160),g=a(137),b=a(53),v=a(61),y=(a(66),a(74),function(e){var t=e.data,a=e.headers,n=e.handleRemove,r=e.startEditing,l=e.editIdx,o=e.handleChange,c=e.stopEditing;return d.a.createElement("div",null,d.a.createElement(E.a,{className:"sizeTable ",striped:!0,hover:!0,size:"sm"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{scope:"col"},"#"),a.map((function(e,t){return d.a.createElement("th",{key:"th-".concat(t),scope:"col"},e.name)})),d.a.createElement("th",{scope:"col"}),d.a.createElement("th",{scope:"col"}))),d.a.createElement("tbody",null,t.map((function(e,t){return function(e,t,a,n,r,l,o,c){var s=l===t;return d.a.createElement("tr",{key:"tr-".concat(t)},d.a.createElement("td",null,t+1),a.map((function(a,n){return d.a.createElement("td",{key:"td-".concat(n)},s?d.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return o(e,a.prop,t)},name:a.prop,value:e[a.prop]}):e[a.prop])})),s?d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return c(t)}},"check_circle")):d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return r(t)}},"edit")),d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons",onClick:function(){return n(t)}},"delete")))}(e,t,a,n,r,l,o,c)})))))}),k=[{name:"Parada de bus",prop:"name"},{name:"Latitude",prop:"latitude"},{name:"Longitude",prop:"longitude"}],S=a(19),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={latitude:"",longitude:"",name:"",errors:""},e.validateFields=function(){var t=!1,a=[];return e.state.latitude||(t=!0,a.push("La latitude es requerida")),e.state.longitude||(t=!0,a.push("La longitude es requerida")),e.state.name||(t=!0,a.push("El nombre es requerido")),t&&e.setState({errors:a}),t},e.handleInputChange=function(t){var a=t.target.name;e.setState(Object(n.a)({},a,t.target.value))},e.createRow=function(t){t.preventDefault();var a=e.state.name,n=e.state;e.validateFields()||(e.props.addRow(n),e.setState({latitude:"",longitude:"",name:a,errors:""}),t.currentTarget.reset())},e.createSchedule=function(t){t.preventDefault();var a=e.state;t.currentTarget.reset(),console.log(a)},e}return Object(c.a)(a,[{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(S.a,null,d.a.createElement(m.a,null,d.a.createElement(p.a,null,this.state.errors&&d.a.createElement("div",{className:"alert alert-warning",role:"alert"},this.state.errors.map((function(e){return d.a.createElement("li",null,e)}))),d.a.createElement("form",{onSubmit:this.createRow,autoComplete:"off"},d.a.createElement(m.a,null,d.a.createElement(p.a,{md:12},d.a.createElement("input",{type:"text",onChange:this.handleInputChange,className:"  form-control mb-2",placeholder:"Nombre parada de bus",name:"name"}))),d.a.createElement(m.a,null,d.a.createElement(p.a,{md:4},d.a.createElement("input",{type:"number",onChange:this.handleInputChange,className:"  form-control",placeholder:"latitude",name:"latitude",step:"any"})),d.a.createElement(p.a,{md:4},d.a.createElement("input",{type:"number",onChange:this.handleInputChange,className:" form-control",placeholder:"longitude",name:"longitude",step:"any"})),d.a.createElement(p.a,{md:4},d.a.createElement("button",{type:"submit",className:"btn-block btn  btn-raised btn-primary"},"Agregar"))))))))}}]),a}(d.a.Component),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[],headers:k,editIdx:-1,routeList:[],stopBusList:[],stopBusId:"",btn:!1},e.editStopBus=function(t){var a=t.detail.map((function(e){return{name:e.name,latitude:e.latitude,longitude:e.longitude}}));e.setState({btn:!0,data:a,stopBusId:t._id}),console.log(a)},e.addRow=function(t){var a=e.state.data,n=[].concat(Object(l.a)(a),[t]);e.setState({data:n})},e.handleRemove=function(t){e.setState({data:e.state.data.filter((function(e,a){return a!==t}))})},e.startEditing=function(t){e.setState({editIdx:t})},e.stopEditing=function(t){e.setState({editIdx:-1})},e.handleChange=function(t,a,l){var o=t.target.value;e.setState({data:e.state.data.map((function(e,t){return t===l?Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},a,o)):e}))})},e.setRoute=function(t){var a=t.target.value;e.setState({route:a}),console.log(a)},e.createStopBus=function(){var t=e.state.route;if(e.state.data.length<=0)v.b.error("Ingrese paradas de bus");else{var a=e.state.data.map((function(e){return{name:e.name,latitude:e.latitude,longitude:e.longitude}}));b.a.post("/stopBus",{route:t,detail:a}).then((function(t){e.cleanForm(),v.b.success("Paradas de bus creadas correctamente.")})).catch((function(e){v.b.error(JSON.stringify(e.data.errors,null,2))}))}},e.stopBusModify=function(){if(e.state.data.length<=0||e.state.stopBusId<=0)v.b.error("Ingrese paradas de bus");else{var t=e.state.data.map((function(e){return{name:e.name,latitude:e.latitude,longitude:e.longitude}}));b.a.put("/stopBus/".concat(e.state.stopBusId),{detail:t}).then((function(t){e.cleanForm(),v.b.success("Paradas de bus modificadas correctamente.")})).catch((function(e){v.b.error(JSON.stringify(e.data.errors,null,2))}))}},e.stopBusDel=function(t){b.a.del("/stopBus/".concat(t._id)).then((function(t){e.cleanForm(),v.b.warning("Parada de bus eliminada correctamente.")})).catch((function(e){v.b.error(JSON.stringify(e.data.errors,null,2))}))},e.cleanForm=function(){e.setState({data:[],stopBusList:[],btn:!1}),e.getStopBus()},e.getRoutes(),e.getStopBus(),e}return Object(c.a)(a,[{key:"getStopBus",value:function(){var e=this;b.a.get("/stopBus").then((function(t){e.setState({stopBusList:t.data.stopBus})})).catch((function(e){console.log(e)}))}},{key:"getRoutes",value:function(){var e=this;b.a.get("/route").then((function(t){e.setState({routeList:t.data.route}),e.setState({route:t.data.route[0]._id})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"container"},d.a.createElement(m.a,null,d.a.createElement(p.a,{md:12},d.a.createElement(h.a,null,d.a.createElement(h.a.Body,null,d.a.createElement(m.a,null,d.a.createElement(p.a,{md:12},d.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"#"),d.a.createElement("th",null,"Ruta"),d.a.createElement("th",null,"Editar"),d.a.createElement("th",null,"Eliminar"))),d.a.createElement("tbody",null,this.state.stopBusList.map((function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",{key:a+1},a+1),d.a.createElement("td",{key:t.id},t.route.name),d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons btn btn-warning",onClick:function(){return e.editStopBus(t)}},"edit")),d.a.createElement("td",null,d.a.createElement("i",{className:"material-icons btn btn-danger",onClick:function(){return e.stopBusDel(t)}},"delete")))})))))),d.a.createElement(m.a,null,d.a.createElement(p.a,{md:6},d.a.createElement(f.a.Group,{as:m.a,controlId:"exampleForm.ControlSelect1"},d.a.createElement(f.a.Label,{column:!0,sm:"2"},"Ruta"),d.a.createElement(p.a,{sm:"10"},d.a.createElement(f.a.Control,{as:"select",name:"route",onChange:this.setRoute},this.state.routeList.map((function(e,t){var a=e._id,n=e.name;return d.a.createElement("option",{value:a,key:t}," ",n," ")})))))),d.a.createElement(p.a,{md:6},d.a.createElement(g.a,{variant:"success",onClick:this.createStopBus,disabled:this.state.btn|this.state.data.length<1},"Guardar"),d.a.createElement(g.a,{variant:"warning",onClick:this.stopBusModify,disabled:!this.state.btn},"Editar"),d.a.createElement(g.a,{variant:"secondary",onClick:this.cleanForm},"Limpiar"))),d.a.createElement("div",{className:"clearfix"}),d.a.createElement(m.a,null,d.a.createElement(p.a,{md:6},d.a.createElement(B,{addRow:this.addRow})),d.a.createElement(p.a,{md:6},d.a.createElement(y,{headers:k,data:this.state.data,handleRemove:this.handleRemove,startEditing:this.startEditing,editIdx:this.state.editIdx,handleChange:this.handleChange,stopEditing:this.stopEditing})))))),d.a.createElement(v.a,{closeButton:!1,position:"bottom-right"})))}}]),a}(d.a.Component);t.default=C},53:function(e,t,a){"use strict";var n=a(7),r=a(8),l=a(55),o=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"get",value:function(e){return l.a.get(e)}},{key:"post",value:function(e,t){return l.a.post(e,t)}},{key:"put",value:function(e,t){return l.a.put(e,t)}},{key:"del",value:function(e){return l.a.delete(e)}}]),e}();t.a=new o},74:function(e,t,a){}}]);
//# sourceMappingURL=13.e6816286.chunk.js.map