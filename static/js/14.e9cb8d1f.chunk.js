(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[14],{147:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(2),l=a(7),o=a(8),c=a(10),i=a(9),u=a(0),m=a.n(u),s=a(143),d=a(98),h=a(150),E=a(144),p=a(160),f=a(137),v=a(19),b=a(53),y=a(61),g=(a(66),function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){var a,l=t.target,o=l.name,c=l.value,i=e.state,u=i.form,m=i.formErrors;a=Object(r.a)(Object(r.a)({},u),{},Object(n.a)({},o,c)),e.setState({form:a},(function(){if(Object.keys(m).includes(o)){var t,a=e.validateField(o,c);t=Object(r.a)(Object(r.a)({},m),{},Object(n.a)({},o,a)),e.setState({formErrors:t})}}))},e.validateField=function(e,t){var a=null;switch(e){case"country":t||(a="Seleccione pa\xeds");break;case"departament":t||(a="Seleccione departamento");break;case"municipality":t||(a="Seleccione municipio");break;case"town":t||(a="Seleccione aldea o zona");break;case"route":t||(a="Ingrese nombre de ruta");break;default:a=null}return a},e.validateForm=function(e,t,a){var n={};return Object.keys(t).forEach((function(t){var r=a(t,e[t]);r&&(n[t]=r)})),n},e.handleSubmit=function(){var t=e.state,a=t.form,n=t.formErrors,l=e.validateForm(a,n,e.validateField);if(0!==Object.keys(l).length)return e.setState({formErrors:Object(r.a)(Object(r.a)({},n),l)}),!1;var o=a.town,c=a.route;b.a.post("/route",{town:o,name:c}).then((function(t){y.b.success("Ruta creada correctamente."),e.getRoutes()})).catch((function(e){y.b.error(e.data.msg)}))},e.editRoute=function(t){var a=t._id,n=t.name;e.setState({btn:!0,form:{town:t.town._id,route:n,routeID:a}}),e.setList({name:"town",value:t.town._id})},e.state={form:{country:"",departament:"",municipality:"",town:"",route:""},formErrors:{country:null,departament:null,municipality:null,town:null,route:"",routeID:"",btn:!1},countryList:[],depList:[],muniList:[],townList:[],routeList:[]},e.getCountries(),e.getDepartament(),e.getMunicipality(),e.getTown(),e.getRoutes(),e}return Object(o.a)(a,[{key:"setList",value:function(e){var t=this,a=e.name,l=e.value,o=this.state,c=o.form,i=o.formErrors,u=Object(r.a)(Object(r.a)({},c),{},Object(n.a)({},a,l));this.setState({form:u},(function(){if(Object.keys(i).includes(a)){var e,o=t.validateField(a,l);e=Object(r.a)(Object(r.a)({},i),{},Object(n.a)({},a,o)),t.setState({formErrors:e})}}))}},{key:"getCountries",value:function(){var e=this;b.a.get("/country").then((function(t){e.setState({countryList:t.data.countries}),e.setList({name:"country",value:t.data.countries[0]._id})})).catch((function(e){console.log(e)}))}},{key:"getDepartament",value:function(){var e=this;b.a.get("/departament").then((function(t){e.setState({depList:t.data.departaments}),e.setList({name:"departament",value:t.data.departaments[0]._id})})).catch((function(e){console.log(e)}))}},{key:"getMunicipality",value:function(){var e=this;b.a.get("/municipality").then((function(t){e.setState({muniList:t.data.municipality}),e.setList({name:"municipality",value:t.data.municipality[0]._id})})).catch((function(e){console.log(e)}))}},{key:"getTown",value:function(){var e=this;b.a.get("/town").then((function(t){e.setState({townList:t.data.town}),e.setList({name:"town",value:t.data.town[0]._id})})).catch((function(e){console.log(e)}))}},{key:"getRoutes",value:function(){var e=this;b.a.get("/route").then((function(t){e.setState({routeList:t.data.route})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.form,n=t.formErrors;t.countryList;return m.a.createElement(m.a.Fragment,null,m.a.createElement(v.a,null,m.a.createElement(s.a,null,m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(h.a.Body,null,m.a.createElement("hr",null),m.a.createElement(s.a,null,m.a.createElement(d.a,{md:12},m.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"#"),m.a.createElement("th",null,"Aldea/Zona"),m.a.createElement("th",null,"Nombre Ruta"),m.a.createElement("th",null,"Editar"),m.a.createElement("th",null,"Eliminar"))),m.a.createElement("tbody",null,this.state.routeList.map((function(t,a){return m.a.createElement("tr",{key:a},m.a.createElement("td",{key:a+1},a+1),m.a.createElement("td",{key:t.town._id},t.town.name),m.a.createElement("td",{key:t.name},t.name),m.a.createElement("td",null,m.a.createElement("i",{className:"material-icons btn btn-warning",onClick:function(){return e.editRoute(t)}},"edit")),m.a.createElement("td",null,m.a.createElement("i",{className:"material-icons btn btn-danger",onClick:function(){return e.getRoutes(t)}},"delete")))})))))),m.a.createElement(s.a,null,m.a.createElement(d.a,{md:4},m.a.createElement(p.a.Group,{controlId:"exampleForm.ControlSelect1"},m.a.createElement(p.a.Label,null,"Pais"),m.a.createElement(p.a.Control,{as:"select",name:"country",onChange:this.handleChange},this.state.countryList.map((function(e,t){var a=e._id,n=e.name;return m.a.createElement("option",{value:a,key:t}," ",n," ")}))),n.country&&m.a.createElement("span",{className:"err"},n.country))),m.a.createElement(d.a,{md:4},m.a.createElement(p.a.Group,{controlId:"exampleForm.ControlSelect1"},m.a.createElement(p.a.Label,null,"Departamento"),m.a.createElement(p.a.Control,{as:"select",name:"departament",onChange:this.handleChange},this.state.depList.map((function(e,t){var a=e._id,n=e.name;return m.a.createElement("option",{value:a,key:t}," ",n," ")}))),n.departament&&m.a.createElement("span",{className:"err"},n.departament))),m.a.createElement(d.a,{md:4},m.a.createElement(p.a.Group,{controlId:"exampleForm.ControlSelect1"},m.a.createElement(p.a.Label,null,"Municipio"),m.a.createElement(p.a.Control,{as:"select",name:"municipality",onChange:this.handleChange},this.state.muniList.map((function(e,t){var a=e._id,n=e.name;return m.a.createElement("option",{value:a,key:t}," ",n," ")}))),n.municipality&&m.a.createElement("span",{className:"err"},n.municipality)))),m.a.createElement(s.a,null,m.a.createElement(d.a,{md:4},m.a.createElement(p.a.Group,{controlId:"exampleForm.ControlSelect1"},m.a.createElement(p.a.Label,null,"Zona/Aldea"),m.a.createElement(p.a.Control,{as:"select",name:"town",onChange:this.handleChange},this.state.townList.map((function(e,t){var a=e._id,n=e.name;return m.a.createElement("option",{value:a,key:t}," ",n," ")}))),n.town&&m.a.createElement("span",{className:"err"},n.town))),m.a.createElement(d.a,{md:4},m.a.createElement(p.a.Group,{controlId:"formBasicEmail"},m.a.createElement(p.a.Label,null,"Nombre de ruta"),m.a.createElement(p.a.Control,{type:"text",placeholder:"Nombre de ruta",name:"route",value:a.route,onChange:this.handleChange,onBlur:this.handleChange}),m.a.createElement(p.a.Text,{className:"text-muted"}),n.route&&m.a.createElement("span",{className:"err"},n.route))),m.a.createElement(d.a,{md:4},m.a.createElement(f.a,{variant:"primary",className:"mt-4",onClick:this.handleSubmit},"Guardar")))))),m.a.createElement(y.a,{closeButton:!1,position:"bottom-right"}))))}}]),a}(m.a.Component));t.default=g},53:function(e,t,a){"use strict";var n=a(7),r=a(8),l=a(55),o=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"get",value:function(e){return l.a.get(e)}},{key:"post",value:function(e,t){return l.a.post(e,t)}},{key:"put",value:function(e,t){return l.a.put(e,t)}},{key:"del",value:function(e){return l.a.delete(e)}}]),e}();t.a=new o}}]);
//# sourceMappingURL=14.e9cb8d1f.chunk.js.map